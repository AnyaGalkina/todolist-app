(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{113:function(t,e,a){t.exports={task:"Task_task__2Pjwc",taskIsDone:"Task_taskIsDone__2VCLH"}},114:function(t,e,a){t.exports={errorMessage:"TodoList_errorMessage__3qCNg",error:"TodoList_error__2k7k2",button:"TodoList_button__2UrSy",todolistTitle:"TodoList_todolistTitle__1tRXl"}},140:function(t,e,a){},141:function(t,e,a){},173:function(t,e,a){"use strict";a.r(e);var n,c,o,i=a(0),r=a.n(i),s=a(33),d=a.n(s),l=(a(140),a(141),a(251)),u=a(250),j=a(253),b=a(255),f=a(246),O=a(254),p=a(112),h=a.n(p),m=a(75),x=a(16),y=a(14),g=a(244),v=a(62),I=a.n(v),T=I.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"8cb31c3e-5e62-4d4f-945f-025b0014bebf"}}),S=function(){return T.get("/todo-lists")},k=function(t){return T.post("/todo-lists",{title:t})},w=function(t){return T.put("/todo-lists/".concat(t.todolistId),{title:t.title})},_=function(t){return T.delete("/todo-lists/".concat(t))},C=function(t){return T.get("/todo-lists/".concat(t,"/tasks"))},E=function(t){return T.post("/todo-lists/".concat(t.todolistId,"/tasks"),{title:t.title})},A=function(t){return T.put("/todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId),Object(y.a)({},t.model))},L=function(t){return T.delete("/todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId))};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={})),function(t){t[t.succeeded=0]="succeeded",t[t.error=1]="error"}(o||(o={}));var D=function(t){return T.post("/auth/login",t)},P=function(){return T.get("/auth/me")},N=function(){return T.delete("/auth/login")},K=a(63),U=a(86),H=function(t,e){e(B(t.message)),e(Z("failed"))},R=function(t,e){t.messages.length?e(B(t.messages[0])):e(B("Some error occurred")),e(Z("failed"))},M="AUTH/SET_AUTH",F={isLoggedIn:!1},z=function(t){return{type:M,payload:{isLoggedIn:t}}},G="APP/SET_STATUS",q="APP/SET_ERROR",V="APP/SET_INITIALIZED",W={status:"idle",error:null,isInitialized:!1},Z=function(t){return{type:G,payload:{status:t}}},B=function(t){return{type:q,payload:{error:t}}},Y=function(){return function(t){P().then((function(e){e.data.resultCode===o.succeeded&&t(z(!0))})).finally((function(){t({type:V,payload:{isInitialized:!0}})}))}},J="TODO_LISTS/CHANGE_TODOLIST_TITLE",$="TODO_LISTS/REMOVE_TODO_LISTS",X="TODO_LISTS/ADD_TODOLIST",Q="TODO_LISTS/CHANGE_FILTER",tt="TODO_LISTS/SET_TODO_LISTS",et="TODO_LISTS/SET_ENTITY_STATUS",at="all",nt="active",ct="completed",ot=(Object(g.a)(),Object(g.a)(),[]),it=function(t,e){return{type:et,payload:{todolistId:t,entityStatus:e}}},rt=function(){return function(t){t(Z("loading")),S().then((function(e){var a;t((a=e.data,{type:tt,payload:{todolists:a}}))})).catch((function(e){H(e,t)}))}},st=function(t){return function(e){e(Z("loading")),e(it(t,"loading")),_(t).then((function(a){a.data.resultCode===o.succeeded?(e(function(t){return{type:$,payload:{todolistId:t}}}(t)),e(Z("succeeded"))):R(a.data,e),e(it(t,"failed"))})).catch((function(a){H(a,e),e(it(t,"failed"))}))}},dt=function(t){return function(e){k(t).then((function(t){var a;t.data.resultCode===o.succeeded?(e((a=t.data.data.item,{type:X,payload:{todolist:a}})),e(Z("succeeded"))):R(t.data,e)})).catch((function(t){H(t,e)}))}},lt=function(t,e){return function(a){w({todolistId:t,title:e}).then((function(n){n.data.resultCode===o.succeeded?(a(function(t,e){return{type:J,payload:{todolistId:t,title:e}}}(t,e)),a(Z("succeeded"))):R(n.data,a)})).catch((function(t){H(t,a)}))}},ut=a(5),jt="TASKS/REMOVE_TASK",bt="TASKS/UPDATE_TASK",ft="TASKS/ADD_TASK",Ot="TASKS/SET_TASKS",pt="TASKS/SET_TASK_ENTITY_STATUS",ht={},mt=function(t,e,a){return{type:pt,payload:{todolistId:t,taskId:e,entityStatus:a}}},xt=function(t){return function(e){e(Z("loading")),C(t).then((function(a){e(function(t,e){return{type:Ot,payload:{todolistId:t,tasks:e}}}(t,a.data.items)),e(Z("succeeded"))})).catch((function(t){H(t,e)}))}},yt=function(t,e){return function(a){a(Z("loading")),a(mt(t,e,"loading")),L({todolistId:t,taskId:e}).then((function(n){n.data.resultCode===o.succeeded?(a(function(t,e){return{type:jt,payload:{todolistId:t,taskId:e}}}(t,e)),a(Z("succeeded")),a(mt(t,e,"succeeded"))):(R(n.data,a),a(mt(t,e,"failed")))})).catch((function(n){H(n,a),a(mt(t,e,"failed"))}))}},gt=function(t){return function(e){e(Z("loading")),E(t).then((function(a){var n,c;a.data.resultCode===o.succeeded?(e((n=t.todolistId,c=a.data.data.item,{type:ft,payload:{todolistId:n,task:c}})),e(Z("succeeded"))):R(a.data,e)})).catch((function(t){H(t,e)}))}},vt=function(t,e,a){return function(n,c){n(Z("loading")),n(mt(t,e,"loading"));var i=c().tasks[t].find((function(t){return t.id===e}));i&&A({todolistId:t,taskId:e,model:Object(y.a)({title:i.title,description:i.description,status:i.status,priority:i.priority,startDate:i.addedDate,deadline:i.deadline},a)}).then((function(a){a.data.resultCode===o.succeeded?(n(function(t,e,a){return{type:bt,payload:{todolistId:t,taskId:e,task:a}}}(t,e,a.data.data.item)),n(Z("succeeded")),n(mt(t,e,"succeeded"))):(R(a.data,n),n(mt(t,e,"failed")))})).catch((function(a){H(a,n),n(mt(t,e,"failed"))}))}},It=a(110),Tt=a(30),St=Tt.c,kt=Object(m.b)({todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case J:return t.map((function(t){return t.id===e.payload.todolistId?Object(y.a)(Object(y.a)({},t),{},{title:e.payload.title}):t}));case Q:return t.map((function(t){return t.id===e.payload.todolistId?Object(y.a)(Object(y.a)({},t),{},{filter:e.payload.filter}):t}));case $:return t.filter((function(t){return t.id!==e.payload.todolistId}));case X:return[Object(y.a)(Object(y.a)({},e.payload.todolist),{},{filter:at,entityStatus:"idle"})].concat(Object(x.a)(t));case tt:return e.payload.todolists.map((function(t){return Object(y.a)(Object(y.a)({},t),{},{filter:at,entityStatus:"idle"})}));case et:return t.map((function(t){return t.id===e.payload.todolistId?Object(y.a)(Object(y.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ft:return Object(y.a)(Object(y.a)({},t),{},Object(ut.a)({},e.payload.todolistId,[Object(y.a)(Object(y.a)({},e.payload.task),{},{entityStatus:"idle"})].concat(Object(x.a)(t[e.payload.todolistId]))));case Ot:return Object(y.a)(Object(y.a)({},t),{},Object(ut.a)({},e.payload.todolistId,e.payload.tasks.map((function(t){return Object(y.a)(Object(y.a)({},t),{},{entityStatus:"idle"})}))));case pt:return Object(y.a)(Object(y.a)({},t),{},Object(ut.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(y.a)(Object(y.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}))));case X:return Object(y.a)(Object(ut.a)({},e.payload.todolist.id,[]),t);case jt:return Object(y.a)(Object(y.a)({},t),{},Object(ut.a)({},e.payload.todolistId,t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskId}))));case bt:return Object(y.a)(Object(y.a)({},t),{},Object(ut.a)({},e.payload.todolistId,t[e.payload.todolistId].map((function(t){return t.id===e.payload.taskId?Object(y.a)(Object(y.a)({},e.payload.task),{},{entityStatus:"idle"}):t}))));case $:var a=Object(y.a)({},t);return delete a[e.payload.todolistId],a;case tt:var n=Object(y.a)({},t);return e.payload.todolists.forEach((function(t){n[t.id]=[]})),n;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case G:case V:case q:return Object(y.a)(Object(y.a)({},t),e.payload);default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;return e.type===M?Object(y.a)(Object(y.a)({},t),{},{isLoggedIn:e.payload.isLoggedIn}):t}}),wt=Object(m.c)(kt,Object(m.a)(It.a));window.store=wt;var _t=Tt.b,Ct=(Tt.c,a(2));var Et=function(){var t=St((function(t){return t.auth.isLoggedIn})),e=_t(),a=Object(i.useCallback)((function(){e(function(){var t=Object(U.a)(Object(K.a)().mark((function t(e){var a;return Object(K.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Z("loading")),t.prev=1,t.next=4,N();case 4:(a=t.sent).data.resultCode===o.succeeded?(e(z(!1)),e(Z("succeeded"))):R(a.data,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),I.a.isAxiosError(t.t0)&&H(t.t0,e);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())}),[t]);return Object(Ct.jsx)(u.a,{sx:{flexGrow:1},children:Object(Ct.jsx)(l.a,{position:"static",style:{backgroundColor:"#66b1d1"},children:Object(Ct.jsxs)(j.a,{children:[Object(Ct.jsx)(O.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(Ct.jsx)(h.a,{})}),Object(Ct.jsx)(b.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Todolist"}),t&&Object(Ct.jsx)(f.a,{color:"inherit",onClick:a,children:"Logout"})]})})})},At=a(248),Lt=a(247),Dt=a(252),Pt=a(13),Nt=a(239),Kt=r.a.memo((function(t){var e=Object(i.useState)(""),a=Object(Pt.a)(e,2),n=a[0],c=a[1],o=Object(i.useState)(null),r=Object(Pt.a)(o,2),s=r[0],d=r[1],l=function(){n.trim()?t.addItem(n):d("Title is required"),c("")};return Object(Ct.jsxs)("div",{children:[Object(Ct.jsx)(Nt.a,{variant:"outlined",value:n,onChange:function(t){c(t.currentTarget.value),s&&d(null)},onKeyPress:function(t){"Enter"===t.key&&l()},error:!!s,label:s?"Title is required":"Title",style:{color:"white"},disabled:t.disabled}),Object(Ct.jsx)(f.a,{variant:"contained",style:{maxWidth:"30px",maxHeight:"30px",minWidth:"30px",minHeight:"30px"},onClick:l,disabled:null!==s||t.disabled&&!0,children:"+"})]})}));var Ut=r.a.memo((function(t){var e=Object(i.useState)(!1),a=Object(Pt.a)(e,2),n=a[0],c=a[1],o=Object(i.useState)(t.title),r=Object(Pt.a)(o,2),s=r[0],d=r[1],l=function(){c(!1),t.onChangeTitle(s)};return n?Object(Ct.jsx)(Nt.a,{color:"secondary",variant:"standard",value:s,onChange:function(t){d(t.currentTarget.value)},onBlur:l,onKeyDown:function(t){"Enter"===t.key&&l()},autoFocus:!0,disabled:t.disabled}):Object(Ct.jsx)("span",{onDoubleClick:function(){c(!0),d(t.title)},children:t.title})})),Ht=a(236),Rt=a(241),Mt=a(235),Ft=a(113),zt=a.n(Ft),Gt=r.a.memo((function(t){var e=t.task,a=t.todolistId,c=_t(),o=Object(i.useCallback)((function(t){c(vt(a,e.id,{title:t}))}),[a,e.id,c]),r="loading"===e.entityStatus;return Object(Ct.jsxs)("div",{className:zt.a.task,children:[Object(Ct.jsxs)("div",{children:[Object(Ct.jsx)(Rt.a,{style:{color:"#c7f774"},checked:e.status===n.Completed,onChange:function(t){var o=e.status===n.Completed?n.New:n.Completed;c(vt(a,e.id,{status:o}))},disabled:r}),Object(Ct.jsx)(Ut,{title:e.title,onChangeTitle:o,disabled:r})]}),Object(Ct.jsx)(O.a,{"aria-label":"delete",onClick:function(){c(yt(a,e.id))},disabled:r,children:Object(Ct.jsx)(Mt.a,{style:{color:"#6b7d84"},fontSize:"small"})})]})})),qt=a(114),Vt=a.n(qt),Wt=r.a.memo((function(t){var e=t.todolist,a=e.title,c=e.id,o=e.filter,r=e.entityStatus,s=Object(Tt.c)((function(t){return t.tasks[c]})),d=_t(),l=Object(i.useCallback)((function(t){return function(){return d(function(t,e){return{type:Q,payload:{todolistId:t,filter:e}}}(c,t))}}),[d,o]),u=Object(i.useCallback)((function(t){d(gt({todolistId:c,title:t}))}),[d]),j=Object(i.useCallback)((function(t){d(lt(c,t))}),[a,d]),b="loading"===r,p=s;switch(o){case nt:p=s.filter((function(t){return t.status===n.New}));break;case ct:p=s.filter((function(t){return t.status===n.Completed}))}var h=s.length?p.map((function(t){return Object(Ct.jsx)(Gt,{task:t,todolistId:c},t.id)})):Object(Ct.jsx)("span",{children:"Your task list is empty"});return Object(i.useEffect)((function(){d(xt(c))}),[]),Object(Ct.jsxs)("div",{children:[Object(Ct.jsxs)("h3",{className:Vt.a.todolistTitle,children:[Object(Ct.jsx)(Ut,{title:a,onChangeTitle:j,disabled:b}),Object(Ct.jsx)(O.a,{"aria-label":"delete",onClick:function(){d(st(c))},disabled:b,children:Object(Ct.jsx)(Ht.a,{style:{color:"#6b7d84"}})})]}),Object(Ct.jsx)("div",{children:Object(Ct.jsx)(Kt,{addItem:u,disabled:b})}),Object(Ct.jsx)("div",{children:h}),Object(Ct.jsxs)("div",{children:[Object(Ct.jsx)(f.a,{variant:"".concat(o===at?"contained":"text"),onClick:l(at),children:"All"}),Object(Ct.jsx)(f.a,{variant:"".concat(o===nt?"contained":"text"),onClick:l(nt),color:"secondary",children:"Active"}),Object(Ct.jsx)(f.a,{variant:"".concat(o===ct?"contained":"text"),onClick:l(ct),size:"small",color:"success",children:"Completed"})]}),Object(Ct.jsx)("div",{})]})})),Zt=a(15),Bt=function(){var t=Object(Tt.c)((function(t){return t.todolists})),e=St((function(t){return t.auth.isLoggedIn})),a=_t(),n=Object(i.useCallback)((function(t){a(dt(t))}),[a]);return Object(i.useEffect)((function(){e&&a(rt())}),[]),e?Object(Ct.jsxs)(Ct.Fragment,{children:[Object(Ct.jsx)(Lt.a,{container:!0,style:{padding:"20px"},children:Object(Ct.jsx)(Kt,{addItem:n,disabled:!1})}),Object(Ct.jsx)(Lt.a,{container:!0,spacing:3,children:t.map((function(t){return Object(Ct.jsx)(Lt.a,{item:!0,children:Object(Ct.jsx)(Dt.a,{style:{padding:"20px",width:"300px"},children:Object(Ct.jsx)(Wt,{todolist:t})})},t.id)}))})]}):Object(Ct.jsx)(Zt.a,{to:"/todolist-app/login"})},Yt=a(259),Jt=a(260),$t=a(237),Xt=a(243),Qt=a(242),te=i.forwardRef((function(t,e){return Object(Ct.jsx)(Qt.a,Object(y.a)({elevation:6,ref:e,variant:"filled"},t))})),ee=function(){var t=St((function(t){return t.app.error})),e=Object(Tt.b)(),a=function(t,a){"clickaway"!==a&&e(B(null))};return Object(Ct.jsx)($t.a,{spacing:2,sx:{width:"100%"},children:Object(Ct.jsx)(Xt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(Ct.jsx)(te,{onClose:a,severity:"error",sx:{width:"100%"},children:t})})})},ae=a(256),ne=a(258),ce=a(257),oe=a(233),ie=a(117),re=a(90),se=a.n(re),de=function(){var t=St((function(t){return t.auth.isLoggedIn})),e=_t(),a=Object(ie.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password.length<2&&(e.password="Password should be minimum 2 symbols"),e},onSubmit:function(t){var n;e((n=t,function(){var t=Object(U.a)(Object(K.a)().mark((function t(e){var a;return Object(K.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Z("loading")),t.prev=1,t.next=4,D(n);case 4:(a=t.sent).data.resultCode===o.succeeded?(e(z(!0)),e(Z("succeeded"))):R(a.data,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),I.a.isAxiosError(t.t0)&&H(t.t0,e);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())),a.resetForm()}});return t?Object(Ct.jsx)(Zt.a,{to:"/todolist-app"}):Object(Ct.jsx)(Lt.a,{container:!0,justifyContent:"center",children:Object(Ct.jsx)(Lt.a,{item:!0,justifyContent:"center",children:Object(Ct.jsx)("form",{onSubmit:a.handleSubmit,children:Object(Ct.jsxs)(ae.a,{children:[Object(Ct.jsxs)(oe.a,{children:[Object(Ct.jsxs)("p",{children:["To log in get registered",Object(Ct.jsx)("a",{style:{color:"white"},href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(Ct.jsx)("p",{children:"or use common test account credentials:"}),Object(Ct.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(Ct.jsx)("p",{children:"Password: free"})]}),Object(Ct.jsxs)(ce.a,{children:[Object(Ct.jsx)(Nt.a,Object(y.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&Object(Ct.jsx)("div",{className:se.a.error,children:a.errors.email}),Object(Ct.jsx)(Nt.a,Object(y.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password&&Object(Ct.jsx)("div",{className:se.a.error,children:a.errors.password}),Object(Ct.jsx)(ne.a,{label:"Remember me",control:Object(Ct.jsx)(Rt.a,Object(y.a)(Object(y.a)({},a.getFieldProps("rememberMe")),{},{checked:a.values.rememberMe}))}),Object(Ct.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},le=function(){return Object(Ct.jsx)("div",{children:Object(Ct.jsx)("h1",{children:"404: PAGE NOT FOUND"})})};var ue=function(){var t=Object(Tt.c)((function(t){return t.app.status})),e=St((function(t){return t.app.isInitialized})),a=_t();return Object(i.useEffect)((function(){a(Y())}),[]),e?Object(Ct.jsxs)("div",{className:"App",children:[Object(Ct.jsx)(Et,{}),"loading"===t&&Object(Ct.jsx)(Jt.a,{}),Object(Ct.jsx)(ee,{}),Object(Ct.jsx)(At.a,{fixed:!0,children:Object(Ct.jsxs)(Zt.d,{children:[Object(Ct.jsx)(Zt.b,{path:"/todolist-app",element:Object(Ct.jsx)(Bt,{})}),Object(Ct.jsx)(Zt.b,{path:"/todolist-app/login",element:Object(Ct.jsx)(de,{})}),Object(Ct.jsx)(Zt.b,{path:"/404",element:Object(Ct.jsx)(le,{})}),Object(Ct.jsx)(Zt.b,{path:"*",element:Object(Ct.jsx)(Zt.a,{to:"/404"})})]})})]}):Object(Ct.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(Ct.jsx)(Yt.a,{color:"primary"})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=a(249),be=a(238),fe=a(57),Oe=a(118),pe=Object(Oe.a)({palette:{primary:{main:"#9999ff"},secondary:{main:"#66b1d1"},success:{main:"#c7f774"},mode:"dark",background:{default:"#242e41",paper:"#2e3b52"}}});d.a.render(Object(Ct.jsx)(fe.a,{children:Object(Ct.jsx)(Tt.a,{store:wt,children:Object(Ct.jsxs)(je.a,{theme:pe,children:[Object(Ct.jsx)(be.a,{}),Object(Ct.jsx)(ue,{})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},90:function(t,e,a){t.exports={error:"Login_error__25Eh1"}}},[[173,1,2]]]);
//# sourceMappingURL=main.12b6825f.chunk.js.map