(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{125:function(t,e,a){t.exports={addItemContainer:"AddItemForm_addItemContainer__3VkRY"}},128:function(t,e,a){t.exports={span:"EditableSpanTitle_span__3L0SZ"}},129:function(t,e,a){t.exports={icons:"Modal_icons__3f5w3"}},132:function(t,e,a){t.exports={errorMessage:"TodoList_errorMessage__3qCNg",error:"TodoList_error__2k7k2",button:"TodoList_button__2UrSy",todolistTitle:"TodoList_todolistTitle__1tRXl"}},156:function(t,e,a){},179:function(t,e,a){},186:function(t,e,a){"use strict";a.r(e);var n,s,r=a(0),i=a.n(r),c=a(37),d=a.n(c),o=(a(156),function(t){return t.app.status}),l=function(t){return t.app.isInitialized},u=function(t){return t.app.error},b=a(134),j=Object(b.a)({palette:{primary:{main:"#9999ff"},secondary:{main:"#66b1d1"},success:{main:"#c7f774"},mode:"dark",background:{default:"#242e41",paper:"#2e3b52"}}}),p=a(16),f=a(30),h=a(17),O=a(121),x=a.n(O).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"8cb31c3e-5e62-4d4f-945f-025b0014bebf"}}),m=function(){return x.get("/todo-lists")},k=function(t){return x.post("/todo-lists",{title:t})},v=function(t){return x.put("/todo-lists/".concat(t.todolistId),{title:t.title})},I=function(t){return x.delete("/todo-lists/".concat(t))},g=function(t){return x.get("/todo-lists/".concat(t,"/tasks"))},y=function(t){return x.post("/todo-lists/".concat(t.todolistId,"/tasks"),{title:t.title})},w=function(t){return x.put("/todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId),Object(h.a)({},t.model))},C=function(t){return x.delete("/todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId))};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var S,_=function(t){return x.post("/auth/login",t)},T=function(){return x.get("/auth/me")},E=function(){return x.delete("/auth/login")},L=function(t,e){e(at({error:t.message})),e(et({status:"failed"}))},N=function(t,e){e(at(t.messages.length?{error:t.messages[0]}:{error:"Some error occurred"})),e(et({status:"failed"}))},W=a(22),P="all",V="active",A="completed",F=Object(W.b)("todolists/getTodolists",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n,s,r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.rejectWithValue,(s=a.dispatch)(et({status:"loading"})),t.prev=2,t.next=5,m();case 5:return r=t.sent,s(et({status:"succeeded"})),t.abrupt("return",{todolists:r.data});case 10:return t.prev=10,t.t0=t.catch(2),L(t.t0,s),t.abrupt("return",n(null));case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()),z=Object(W.b)("todolists/removeTodolists",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n,s,r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.dispatch,s=a.rejectWithValue,n(et({status:"loading"})),n(Z({todolistId:e.todolistId,entityStatus:"loading"})),t.prev=3,t.next=6,I(e.todolistId);case 6:if((r=t.sent).data.resultCode!==S.succeeded){t.next=12;break}return n(et({status:"succeeded"})),t.abrupt("return",{todolistId:e.todolistId});case 12:return N(r.data,n),t.abrupt("return",s(null));case 14:t.next=21;break;case 16:return t.prev=16,t.t0=t.catch(3),L(t.t0,n),n(Z({todolistId:e.todolistId,entityStatus:"failed"})),t.abrupt("return",s(null));case 21:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(e,a){return t.apply(this,arguments)}}()),D=Object(W.b)("todolists/addTodolist",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n,s,r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.dispatch,s=a.rejectWithValue,n(et({status:"loading"})),t.prev=2,t.next=5,k(e.title);case 5:if((r=t.sent).data.resultCode!==S.succeeded){t.next=11;break}return n(et({status:"succeeded"})),t.abrupt("return",{todolist:r.data.data.item});case 11:return N(r.data,n),t.abrupt("return",s(null));case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(2),L(t.t0,n),t.abrupt("return",s(null));case 19:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,a){return t.apply(this,arguments)}}()),B=Object(W.b)("todolists/updateTodolistTitle",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n,s,r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.dispatch,s=a.rejectWithValue,n(et({status:"loading"})),t.prev=2,t.next=5,v({todolistId:e.todolistId,title:e.title});case 5:if((r=t.sent).data.resultCode!==S.succeeded){t.next=11;break}return n(et({status:"succeeded"})),t.abrupt("return",{todolistId:e.todolistId,title:e.title});case 11:return N(r.data,n),t.abrupt("return",s(null));case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(2),L(t.t0,n),t.abrupt("return",s(null));case 19:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,a){return t.apply(this,arguments)}}()),R=Object(W.c)({name:"todolists",initialState:[],reducers:{changeFilter:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].filter=e.payload.filter},setEntityStatus:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].entityStatus=e.payload.entityStatus}},extraReducers:function(t){t.addCase(F.fulfilled,(function(t,e){return e.payload.todolists.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{filter:P,entityStatus:"idle"})}))})),t.addCase(z.fulfilled,(function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t.splice(a,1)})),t.addCase(D.fulfilled,(function(t,e){t.unshift(Object(h.a)(Object(h.a)({},e.payload.todolist),{},{filter:P,entityStatus:"idle"}))})),t.addCase(B.fulfilled,(function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].title=e.payload.title}))}}),M=R.reducer,H=R.actions,U=H.changeFilter,Z=H.setEntityStatus;!function(t){t[t.succeeded=0]="succeeded",t[t.error=1]="error"}(S||(S={}));var q=Object(W.b)("auth/login",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(et({status:"loading"})),t.prev=1,t.next=4,_(e);case 4:if((n=t.sent).data.resultCode!==S.succeeded){t.next=9;break}a.dispatch(et({status:"succeeded"})),t.next=11;break;case 9:return N(n.data,a.dispatch),t.abrupt("return",a.rejectWithValue({errors:n.data.messages,fieldsErrors:n.data.fieldsErrors}));case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(1),L(t.t0,a.dispatch),t.abrupt("return",a.rejectWithValue({errors:[t.t0],fieldsErrors:void 0}));case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,a){return t.apply(this,arguments)}}()),G=Object(W.b)("auth/logout",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(et({status:"loading"})),t.prev=1,t.next=4,E();case 4:if((n=t.sent).data.resultCode!==S.succeeded){t.next=9;break}a.dispatch(et({status:"succeeded"})),t.next=11;break;case 9:return N(n.data,a.dispatch),t.abrupt("return",a.rejectWithValue(null));case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(1),L(t.t0,a.dispatch),t.abrupt("return",a.rejectWithValue(null));case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,a){return t.apply(this,arguments)}}()),Y=Object(W.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(t,e){t.isLoggedIn=e.payload.isLoggedIn}},extraReducers:function(t){t.addCase(q.fulfilled,(function(t,e){t.isLoggedIn=!0})),t.addCase(G.fulfilled,(function(t,e){t.isLoggedIn=!1}))}}),J=Y.reducer,K=Y.actions.setIsLoggedIn,Q=Object(W.b)("app/setInitialized",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:n=t.sent,t.prev=3,n.data.resultCode===S.succeeded&&a.dispatch(K({isLoggedIn:!0}));case 5:return t.prev=5,t.abrupt("return",{isInitialized:!0});case 8:case"end":return t.stop()}}),t,null,[[3,,5,8]])})));return function(e,a){return t.apply(this,arguments)}}()),X=Object(W.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatus:function(t,e){t.status=e.payload.status},setAppError:function(t,e){t.error=e.payload.error}},extraReducers:function(t){t.addCase(Q.fulfilled,(function(t,e){t.isInitialized=!0}))}}),$=X.reducer,tt=X.actions,et=tt.setAppStatus,at=tt.setAppError,nt=(a(179),a(272)),st=a(271),rt=a(273),it=a(196),ct=a(256),dt=a(26),ot=dt.b,lt=a(38),ut=a(68),bt=a(13),jt=a(257),pt=a(260),ft=a(237),ht=a(268),Ot=a(249),xt=a(269),mt=a(270),kt=a(253),vt=a(133),It=a(14),gt=a(1),yt=function(){return Object(gt.jsx)("div",{children:Object(gt.jsx)("h1",{children:"404: PAGE NOT FOUND"})})},wt=a(125),Ct=a.n(wt),St=i.a.memo((function(t){var e=Object(r.useState)(""),a=Object(bt.a)(e,2),n=a[0],s=a[1],i=Object(r.useState)(null),c=Object(bt.a)(i,2),d=c[0],o=c[1],l=function(){n.trim()?t.addItem(n):o("Title is required"),s("")};return Object(gt.jsxs)("div",{className:Ct.a.addItemContainer,children:[Object(gt.jsx)(Ot.a,{variant:"outlined",value:n,onChange:function(t){s(t.currentTarget.value),d&&o(null)},onKeyPress:function(t){"Enter"===t.key&&l()},error:!!d,label:d?"Title is required":"Title",style:{color:"white"},disabled:t.disabled}),Object(gt.jsx)(ct.a,{variant:"contained",style:{maxWidth:"30px",maxHeight:"30px",minWidth:"30px",minHeight:"30px",margin:"5px"},onClick:l,disabled:null!==d||t.disabled&&!0,children:"+"})]})})),_t=a(242),Tt=a(243),Et=Object(r.memo)((function(t){var e=t.passwordType,a=t.toggleShowPassword;return Object(gt.jsx)("span",{onClick:a,children:"password"===e?Object(gt.jsx)(_t.a,{}):Object(gt.jsx)(Tt.a,{})})})),Lt=a(244),Nt=a(254),Wt=a(252),Pt=r.forwardRef((function(t,e){return Object(gt.jsx)(Wt.a,Object(h.a)({elevation:6,ref:e,variant:"filled"},t))})),Vt=function(){var t=Object(dt.c)(u),e=ot(),a=function(t,a){"clickaway"!==a&&e(at({error:null}))};return Object(gt.jsx)(Lt.a,{spacing:2,sx:{width:"100%"},children:Object(gt.jsx)(Nt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(gt.jsx)(Pt,{onClose:a,severity:"error",sx:{width:"100%"},children:t})})})},At=a(263),Ft=a(264),zt=a(245),Dt=a(265),Bt=a(266),Rt=a(267),Mt=a(128),Ht=a.n(Mt),Ut=i.a.memo((function(t){var e=Object(r.useState)(!1),a=Object(bt.a)(e,2),n=a[0],s=a[1],i=Object(r.useState)(t.title),c=Object(bt.a)(i,2),d=c[0],o=c[1],l=function(){s(!1),t.onChangeTitle(d)};return n?Object(gt.jsx)(Ot.a,{style:t.widthInput?{width:t.widthInput}:{},color:"secondary",variant:"standard",value:d,onChange:function(t){o(t.currentTarget.value)},onBlur:l,onKeyDown:function(t){"Enter"===t.key&&l()},autoFocus:!0,disabled:t.disabled}):Object(gt.jsx)("span",{className:Ht.a.span,onClick:function(){s(!0),o(t.title)},children:t.title})})),Zt=a(130),qt=a.n(Zt),Gt=a(129),Yt=a.n(Gt),Jt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",minHeight:"100vh",border:"2px solid #000",boxShadow:24},Kt=Object(r.memo)((function(t){var e=t.open,a=t.description,n=t.handleClose,s=t.title,i=t.handleSave,c=t.handleOpen,d=Object(dt.c)(o),l=Object(r.useState)(a),u=Object(bt.a)(l,2),b=u[0],j=u[1],p="loading"===d;return Object(gt.jsxs)("div",{children:[Object(gt.jsx)(At.a,{"aria-label":"add description",onClick:c,disabled:p,children:Object(gt.jsx)(qt.a,{style:{color:"#6b7d84"},fontSize:"small"})}),Object(gt.jsxs)(Ft.a,{sx:Jt,open:e,onClose:n,children:[Object(gt.jsx)(zt.a,{children:s}),Object(gt.jsx)(Dt.a,{}),Object(gt.jsxs)("div",{className:Yt.a.bodyDescriptionBlock,children:[Object(gt.jsx)(Bt.a,{style:{maxWidth:"500px"},children:Object(gt.jsx)(Ut,{widthInput:"350px",title:b||"Click on text to add new description",onChangeTitle:function(t){j(t)},disabled:p})}),Object(gt.jsxs)(Rt.a,{children:[Object(gt.jsx)(ct.a,{style:{margin:15},size:"small",variant:"contained",color:"success",onClick:function(){i({description:b})},disabled:p,autoFocus:!0,children:"Save"}),Object(gt.jsx)(ct.a,{style:{margin:15},size:"small",color:"success",variant:"outlined",onClick:n,disabled:p,children:"Close"})]})]})]})]})})),Qt=function(){var t=ot(),e=Object(dt.c)(Xt),a=Object(vt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is required",t.password.length<2&&(e.password="Password should be minimum 2 symbols"),e},onSubmit:function(){var e=Object(f.a)(Object(p.a)().mark((function e(n,s){var r,i,c,d;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(q(n));case 2:r=e.sent,q.rejected.match(r)&&null!==(i=r.payload)&&void 0!==i&&null!==(c=i.fieldsErrors)&&void 0!==c&&c.length&&(d=r.payload.fieldsErrors[0],s.setFieldError(d.field,d.error)),a.resetForm();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}),n=Object(r.useState)("password"),s=Object(bt.a)(n,2),i=s[0],c=s[1],d=Object(r.useCallback)((function(){c("password"===i?"text":"password")}),[i]);return e?Object(gt.jsx)(It.a,{to:"/todolist-app"}):Object(gt.jsx)(jt.a,{container:!0,justifyContent:"center",children:Object(gt.jsx)(jt.a,{item:!0,justifyContent:"center",children:Object(gt.jsx)("form",{onSubmit:a.handleSubmit,children:Object(gt.jsxs)(pt.a,{children:[Object(gt.jsxs)(ft.a,{children:[Object(gt.jsx)($t,{}),Object(gt.jsx)(re,{})]}),Object(gt.jsxs)(ht.a,{style:{width:"340px"},children:[Object(gt.jsx)(Ot.a,Object(h.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),Object(gt.jsx)(ae,{touched:a.touched.email,errors:a.errors.email}),Object(gt.jsx)(Ot.a,Object(h.a)(Object(h.a)({type:i,label:"Password",margin:"normal"},a.getFieldProps("password")),{},{InputProps:{endAdornment:Object(gt.jsx)(xt.a,{position:"end",children:Object(gt.jsx)(Et,{passwordType:i,toggleShowPassword:d})})}})),Object(gt.jsx)(ae,{touched:a.touched.password,errors:a.errors.password}),Object(gt.jsx)(mt.a,{label:"Remember me",control:Object(gt.jsx)(kt.a,Object(h.a)(Object(h.a)({},a.getFieldProps("rememberMe")),{},{checked:a.values.rememberMe}))}),Object(gt.jsx)(ct.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},Xt=function(t){return t.auth.isLoggedIn},$t=function(){return Object(gt.jsxs)("div",{children:[Object(gt.jsxs)("p",{children:["To log in get registered",Object(gt.jsx)("a",{style:{color:"white"},href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(gt.jsx)("p",{children:"or use common test account credentials:"}),Object(gt.jsx)("p",{children:"Email: anna.blackbird1@gmail.com"}),Object(gt.jsx)("p",{children:"Password: Free12345"})]})},te=a(69),ee=a.n(te),ae=function(t){var e=t.touched,a=t.errors;return Object(gt.jsx)("div",{children:e&&a&&Object(gt.jsx)("div",{className:ee.a.error,children:a})})},ne=a(131),se=a.n(ne),re=function(){return Object(gt.jsxs)("div",{className:ee.a.warningBlock,children:[Object(gt.jsxs)("div",{className:ee.a.warningText,children:[Object(gt.jsx)(se.a,{fontSize:"large",style:{color:"orange",paddingRight:"10px"}}),"If you have some issue with log in using Safari, please follow instructions:"]}),Object(gt.jsx)("div",{children:"Click the Safari menu, you will see the Preferences item - click on it. Then click the Privacy item to see privacy related options. You will see the Website tracking checkbox. Click on Prevent cross-site tracking."})]})},ie=function(t){return t.todolists},ce=a(246),de=a(132),oe=a.n(de),le=i.a.memo((function(t){var e=t.todolist,a=e.title,s=e.id,i=e.filter,c=e.entityStatus,d=Object(dt.c)((function(t){return t.tasks[s]})),o=ot(),l=Object(r.useCallback)((function(t){return function(){return o(U({todolistId:s,filter:t}))}}),[o,i]),u=Object(r.useCallback)((function(t){o(je({todolistId:s,title:t}))}),[o]),b=Object(r.useCallback)((function(t){o(B({todolistId:s,title:t}))}),[a,o]),j="loading"===c,p=d;switch(i){case V:p=d.filter((function(t){return t.status===n.New}));break;case A:p=d.filter((function(t){return t.status===n.Completed}))}var f=d.length?p.map((function(t){return Object(gt.jsx)(ve,{task:t,todolistId:s},t.id)})):Object(gt.jsx)("span",{children:"Your task list is empty"});return Object(r.useEffect)((function(){o(ue(s))}),[]),Object(gt.jsxs)("div",{children:[Object(gt.jsxs)("h3",{className:oe.a.todolistTitle,children:[Object(gt.jsx)(Ut,{title:a,onChangeTitle:b,disabled:j}),Object(gt.jsx)(At.a,{"aria-label":"delete",onClick:function(){o(z({todolistId:s}))},disabled:j,children:Object(gt.jsx)(ce.a,{style:{color:"#6b7d84"}})})]}),Object(gt.jsx)("div",{children:Object(gt.jsx)(St,{addItem:u,disabled:j})}),Object(gt.jsx)("div",{children:f}),Object(gt.jsxs)("div",{children:[Object(gt.jsx)(ct.a,{variant:"".concat(i===P?"contained":"text"),onClick:l(P),children:"All"}),Object(gt.jsx)(ct.a,{variant:"".concat(i===V?"contained":"text"),onClick:l(V),color:"secondary",children:"Active"}),Object(gt.jsx)(ct.a,{variant:"".concat(i===A?"contained":"text"),onClick:l(A),size:"small",color:"success",children:"Completed"})]}),Object(gt.jsx)("div",{})]})})),ue=Object(W.b)("tasks/getTasks",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(et({status:"loading"})),t.prev=1,t.next=4,g(e);case 4:return n=t.sent,a.dispatch(et({status:"succeeded"})),t.abrupt("return",{todolistId:e,tasks:n.data.items});case 9:return t.prev=9,t.t0=t.catch(1),L(t.t0,a.dispatch),t.abrupt("return",a.rejectWithValue(null));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}()),be=Object(W.b)("tasks/removeTask",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(et({status:"loading"})),a.dispatch(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"loading"})),t.prev=2,t.next=5,C({todolistId:e.todolistId,taskId:e.taskId});case 5:if((n=t.sent).data.resultCode!==S.succeeded){t.next=12;break}return a.dispatch(et({status:"succeeded"})),a.dispatch(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"succeeded"})),t.abrupt("return",{todolistId:e.todolistId,taskId:e.taskId});case 12:return N(n.data,a.dispatch),a.dispatch(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"failed"})),t.abrupt("return",a.rejectWithValue(null));case 15:t.next=22;break;case 17:return t.prev=17,t.t0=t.catch(2),L(t.t0,a.dispatch),a.dispatch(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"failed"})),t.abrupt("return",a.rejectWithValue(null));case 22:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e,a){return t.apply(this,arguments)}}()),je=Object(W.b)("tasks/addTask",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(et({status:"loading"})),t.prev=1,t.next=4,y(e);case 4:if((n=t.sent).data.resultCode!==S.succeeded){t.next=10;break}return a.dispatch(et({status:"succeeded"})),t.abrupt("return",{todolistId:e.todolistId,task:n.data.data.item});case 10:return N(n.data,a.dispatch),t.abrupt("return",a.rejectWithValue(null));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(1),L(t.t0,a.dispatch),t.abrupt("return",a.rejectWithValue(null));case 18:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e,a){return t.apply(this,arguments)}}()),pe=Object(W.b)("tasks/updateTask",function(){var t=Object(f.a)(Object(p.a)().mark((function t(e,a){var n,s,r,i,c,d;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.dispatch,s=a.rejectWithValue,r=a.getState,n(et({status:"loading"})),n(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"loading"})),i=r(),!(c=i.tasks[e.todolistId].find((function(t){return t.id===e.taskId})))){t.next=26;break}return t.next=8,w({todolistId:e.todolistId,taskId:e.taskId,model:Object(h.a)({title:c.title,description:c.description,status:c.status,priority:c.priority,startDate:c.addedDate,deadline:c.deadline},e.model)});case 8:if(d=t.sent,t.prev=9,d.data.resultCode!==S.succeeded){t.next=16;break}return n(et({status:"succeeded"})),n(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"succeeded"})),t.abrupt("return",{todolistId:e.todolistId,taskId:e.taskId,task:d.data.data.item});case 16:return N(d.data,n),n(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"failed"})),t.abrupt("return",s(null));case 19:t.next=26;break;case 21:return t.prev=21,t.t0=t.catch(9),L(t.t0,n),n(Oe({todolistId:e.todolistId,taskId:e.taskId,entityStatus:"failed"})),t.abrupt("return",s(null));case 26:return t.abrupt("return",s(null));case 27:case"end":return t.stop()}}),t,null,[[9,21]])})));return function(e,a){return t.apply(this,arguments)}}()),fe=Object(W.c)({name:"tasks",initialState:{},reducers:{setTaskEntityStatus:function(t,e){var a=t[e.payload.todolistId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(t[e.payload.todolistId][a].entityStatus=e.payload.entityStatus)}},extraReducers:function(t){t.addCase(D.fulfilled,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(z.fulfilled,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(F.fulfilled,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))})),t.addCase(ue.fulfilled,(function(t,e){t[e.payload.todolistId]=e.payload.tasks.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{entityStatus:"idle"})}))})),t.addCase(be.fulfilled,(function(t,e){var a=t[e.payload.todolistId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&t[e.payload.todolistId].splice(a,1)})),t.addCase(je.fulfilled,(function(t,e){t[e.payload.todolistId].unshift(Object(h.a)(Object(h.a)({},e.payload.task),{},{entityStatus:"idle"}))})),t.addCase(pe.fulfilled,(function(t,e){var a=t[e.payload.todolistId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(t[e.payload.todolistId][a]=Object(h.a)(Object(h.a)({},e.payload.task),{},{entityStatus:"idle"}))}))}}),he=fe.reducer,Oe=fe.actions.setTaskEntityStatus,xe=a(247),me=a(84),ke=a.n(me),ve=i.a.memo((function(t){var e=t.task,a=t.todolistId,s=ot(),i=Object(r.useState)(!1),c=Object(bt.a)(i,2),d=c[0],o=c[1],l=Object(r.useCallback)((function(t){s(pe({todolistId:a,taskId:e.id,model:{title:t}}))}),[a,e.id,s]),u=Object(r.useCallback)((function(){o(!0)}),[d,s]),b=Object(r.useCallback)((function(){o(!1)}),[d,s]),j=Object(r.useCallback)((function(t){s(pe({todolistId:a,taskId:e.id,model:t})),o(!1)}),[d,e.id,a,e.description,s]),p="loading"===e.entityStatus;return Object(gt.jsxs)("div",{children:[Object(gt.jsxs)("div",{className:ke.a.task,children:[Object(gt.jsxs)("div",{children:[Object(gt.jsx)(kt.a,{style:{color:"#c7f774"},checked:e.status===n.Completed,onChange:function(t){var r=e.status===n.Completed?n.New:n.Completed;s(pe({todolistId:a,taskId:e.id,model:{status:r}}))},disabled:p}),Object(gt.jsx)(Ut,{title:e.title,onChangeTitle:l,disabled:p})]}),Object(gt.jsxs)("div",{className:ke.a.icons,children:[Object(gt.jsx)(Kt,{open:d,description:e.description,title:e.title,handleSave:j,handleClose:b,handleOpen:u}),Object(gt.jsx)(At.a,{"aria-label":"delete task",onClick:function(){s(be({todolistId:a,taskId:e.id}))},disabled:p,children:Object(gt.jsx)(xe.a,{style:{color:"#6b7d84"},fontSize:"small"})})]})]}),Object(gt.jsx)("div",{className:ke.a.descriptionBlock,children:e.description})]})})),Ie=a(262),ge=function(){var t=Object(dt.c)(ie),e=Object(dt.c)(Xt),a=ot(),n=Object(r.useCallback)((function(t){a(D({title:t}))}),[a]);return Object(r.useEffect)((function(){e&&a(F())}),[]),e?Object(gt.jsxs)(gt.Fragment,{children:[Object(gt.jsx)(jt.a,{container:!0,style:{padding:"20px"},children:Object(gt.jsx)(St,{addItem:n,disabled:!1})}),Object(gt.jsx)(jt.a,{container:!0,spacing:3,children:t.map((function(t){return Object(gt.jsx)(jt.a,{item:!0,children:Object(gt.jsx)(Ie.a,{style:{padding:"20px",width:"300px"},children:Object(gt.jsx)(le,{todolist:t})})},t.id)}))})]}):Object(gt.jsx)(It.a,{to:"/todolist-app/login"})},ye=Object(lt.b)({todolists:M,tasks:he,app:$,auth:J}),we=Object(W.a)({reducer:ye,middleware:function(t){return t().prepend(ut.a)},devTools:!0});function Ce(){var t=Object(dt.c)(Xt),e=ot(),a=Object(r.useCallback)((function(){e(G())}),[t]);return Object(gt.jsx)(st.a,{sx:{flexGrow:1},children:Object(gt.jsx)(nt.a,{position:"static",style:{backgroundColor:"#66b1d1"},children:Object(gt.jsxs)(rt.a,{children:[Object(gt.jsx)(it.a,{variant:"h6",component:"div",sx:{flexGrow:1,margin:"0 20px"},children:"Todolist"}),t&&Object(gt.jsx)(ct.a,{color:"inherit",onClick:a,children:"Logout"})]})})})}window.store=we;var Se=a(258),_e=a(274),Te=a(275);function Ee(){var t=ot(),e=Object(dt.c)(o),a=Object(dt.c)(l);return Object(r.useEffect)((function(){t(Q())}),[]),a?Object(gt.jsxs)("div",{className:"App",children:[Object(gt.jsx)(Ce,{}),"loading"===e&&Object(gt.jsx)(Te.a,{}),Object(gt.jsx)(Vt,{}),Object(gt.jsx)(Se.a,{fixed:!0,children:Object(gt.jsxs)(It.d,{children:[Object(gt.jsx)(It.b,{path:"/todolist-app",element:Object(gt.jsx)(ge,{})}),Object(gt.jsx)(It.b,{path:"/todolist-app/login",element:Object(gt.jsx)(Qt,{})}),Object(gt.jsx)(It.b,{path:"/404",element:Object(gt.jsx)(yt,{})}),Object(gt.jsx)(It.b,{path:"*",element:Object(gt.jsx)(It.a,{to:"/404"})})]})})]}):Object(gt.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(gt.jsx)(_e.a,{color:"primary"})})}var Le=a(259),Ne=a(248),We=a(63);d.a.render(Object(gt.jsx)(We.a,{children:Object(gt.jsx)(dt.a,{store:we,children:Object(gt.jsxs)(Le.a,{theme:j,children:[Object(gt.jsx)(Ne.a,{}),Object(gt.jsx)(Ee,{})]})})}),document.getElementById("root"))},69:function(t,e,a){t.exports={error:"Login_error__25Eh1",warningBlock:"Login_warningBlock__QIBvy",warningText:"Login_warningText__QFN97"}},84:function(t,e,a){t.exports={task:"Task_task__2Pjwc",taskIsDone:"Task_taskIsDone__2VCLH",icons:"Task_icons__36xxZ",descriptionBlock:"Task_descriptionBlock__1ST9D"}}},[[186,1,2]]]);
//# sourceMappingURL=main.28546a81.chunk.js.map